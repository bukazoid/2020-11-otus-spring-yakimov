{"version":3,"sources":["webpack:///./src/main/js/common/Tools.js","webpack:///./src/main/js/components/Books.js"],"names":["APP_BASE_URL","JSON_TYPE","handleApiError","response","ok","status","removeToken","window","location","href","Promise","resolve","console","log","statusText","text","doFetch","url","method","data","updateToken","params","body","headers","fetch","Books","getModel","then","json","setState","refreshList","error","state","selected","showEdit","showDelete","loadData","prevProps","rows","map","book","rowBook","Object","assign","model","Component","msgPrefix","idList","id","GridProperty"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA,IAAMA,YAAY,GAAG,GAArB;AACA,IAAMC,SAAS,GAAG,kBAAlB;AAGO,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACC,QAAD,EAAc;AAC1C,MAAIA,QAAQ,CAACC,EAAb,EAAiB,OAAOD,QAAP;;AACjB,UAAQA,QAAQ,CAACE,MAAjB;AACE,SAAK,GAAL;AACEC,iBAAW;AACXC,YAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuBT,YAAvB;AACA,YAAMU,OAAO,CAACC,OAAR,CAAgB,yBAAhB,CAAN;;AACF,SAAK,GAAL;AACEC,aAAO,CAACC,GAAR,CAAY,mBAAmBV,QAAQ,CAACW,UAAxC;AACA,YAAMJ,OAAO,CAACC,OAAR,CAAgB,6BAAhB,CAAN;;AACF,SAAK,GAAL;AACEC,aAAO,CAACC,GAAR,CAAY,mBAAmBV,QAAQ,CAACW,UAAxC;AACA,YAAMJ,OAAO,CAACC,OAAR,CAAgB,0BAAhB,CAAN;;AACF,SAAK,GAAL;AACEC,aAAO,CAACC,GAAR,CAAY,mBAAmBV,QAAQ,CAACW,UAAxC;AACA,YAAMJ,OAAO,CAACC,OAAR,CAAgB,6BAAhB,CAAN;;AACF,SAAK,GAAL;AACA,SAAK,GAAL;AACEC,aAAO,CAACC,GAAR,CAAY,mBAAmBV,QAAQ,CAACW,UAAxC;AACA,YAAMJ,OAAO,CAACC,OAAR,CAAgB,4BAAhB,CAAN;;AACF;AACE,YAAMR,QAAQ,CAACY,IAAT,EAAN;AAnBJ;AAqBD,CAvBM;AAyBP;AACA;AACA;;AACO,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAACC,GAAD,EAAMC,MAAN,EAAcC,IAAd,EAAuB;AAC5CC,aAAW;AACX,MAAMC,MAAM,GAAG;AACbH,UAAM,EAAEA,MADK;AAEbI,QAAI,EAAEH,IAFO;AAGbI,WAAO,EAAE;AACP,sBAAgBtB;AADT;AAHI,GAAf;AAOA,MAAIkB,IAAJ,EAAUE,MAAM,CAACC,IAAP,GAAcH,IAAd;AAEV,SAAOK,KAAK,CAACxB,YAAY,GAAGiB,GAAhB,EAAqBI,MAArB,CAAZ;AACD,CAZM,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChCP;AACA;AACA;AACA;;IAEMI,K;;;;;AACJ,mBAAc;AAAA;;AAAA;;AACZ;;AADY,4DAUNA,KAAK,CAACC,QAAN,CAAe,MAAf,EAAuB,CAAC,IAAD,EAAO,OAAP,EAAgB,QAAhB,EAA0B,QAA1B,CAAvB,CAVM;;AAAA,+DAsBH,YAAM;AACfV,mEAAO,CAAC,YAAD,EAAe,KAAf,CAAP,CACGW,IADH,CACQzB,4DADR,EAEGyB,IAFH,CAEQ,UAACxB,QAAD;AAAA,eAAcA,QAAQ,CAACyB,IAAT,EAAd;AAAA,OAFR,EAGGD,IAHH,CAGQ,UAACC,IAAD;AAAA,eAAU,MAAKC,QAAL,CAAc;AAAEV,cAAI,EAAES,IAAR;AAAcE,qBAAW,EAAE;AAA3B,SAAd,CAAV;AAAA,OAHR,WAIS,UAACC,KAAD;AAAA,eAAWnB,OAAO,CAACmB,KAAR,CAAcA,KAAd,CAAX;AAAA,OAJT;AAKD,KA5Ba;;AAEZ,UAAKC,KAAL,GAAa;AACXb,UAAI,EAAE,IADK;AAEXc,cAAQ,EAAE,IAFC;AAGXC,cAAQ,EAAE,KAHC;AAIXC,gBAAU,EAAE;AAJD,KAAb;AAFY;AAQb;;;;WAID,6BAAoB;AAClB,WAAKC,QAAL;AACD;;;WAED,4BAAmBC,SAAnB,EAA8B;AAC5B,UAAI,KAAKL,KAAL,CAAWF,WAAf,EAA4B;AAC1B,aAAKM,QAAL;AACD;AACF;;;WAcD,kBAAS;AACP,UAAI,CAAC,KAAKJ,KAAL,CAAWb,IAAhB,EAAsB;AAClB,eAAO,EAAP;AACH;;AAHM,UAKCA,IALD,GAKU,KAAKa,KALf,CAKCb,IALD;AAOP,UAAMmB,IAAI,GAAGnB,IAAI,CAACoB,GAAL,CAAS,UAACC,IAAD,EAAU;AAC9B,YAAMC,OAAO,GAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBH,IAAlB,CAAhB;AAEAC,eAAO,CAAC,SAAD,CAAP,gBAAqB,mFAArB;AAEA,eAAOA,OAAP;AACD,OANY,CAAb;AAQA,0BACE,qFACE,6FADF,eAEE,2DAAC,oDAAD;AAAM,aAAK,EAAE,KAAKG,KAAlB;AAAyB,YAAI,EAAEN;AAA/B,QAFF,CADF;AAMD;;;;EAxDiBO,+C;;gBAAdpB,K,cA+Bc,UAACqB,SAAD,EAAYC,MAAZ,EAAuB;AACvC,SAAOA,MAAM,CAACR,GAAP,CAAW,UAACS,EAAD;AAAA,WAAQ,IAAIC,4DAAJ,CAAiBD,EAAjB,EAAqBA,EAArB,CAAR;AAAA,GAAX,CAAP;AACD,C;;AA0BYvB,oEAAf,E","file":"main.e12b8a820991b701663a.hot-update.js","sourcesContent":["const APP_BASE_URL = \"/\";\nconst JSON_TYPE = \"application/json\";\n\n\nexport const handleApiError = (response) => {\n  if (response.ok) return response;\n  switch (response.status) {\n    case 401:\n      removeToken();\n      window.location.href = APP_BASE_URL;\n      throw Promise.resolve(\"Error.unauthorized-user\");\n    case 403:\n      console.log(\"Client Error: \" + response.statusText);\n      throw Promise.resolve(\"Error.invalid-pass-or-login\");\n    case 404:\n      console.log(\"Client Error: \" + response.statusText);\n      throw Promise.resolve(\"Error.resource-not-found\");\n    case 500:\n      console.log(\"Server Error: \" + response.statusText);\n      throw Promise.resolve(\"Error.internal-server-error\");\n    case 503:\n    case 504:\n      console.log(\"Server Error: \" + response.statusText);\n      throw Promise.resolve(\"Error.server-not-available\");\n    default:\n      throw response.text();\n  }\n};\n\n/**\n * supports upload too\n */\nexport const doFetch = (url, method, data) => {\n  updateToken();\n  const params = {\n    method: method,\n    body: data,\n    headers: {\n      \"Content-Type\": JSON_TYPE,\n    },\n  };\n  if (data) params.body = data;\n\n  return fetch(APP_BASE_URL + url, params);\n};\n","import React, { Component } from \"react\";\nimport Grid from \"../common/Grid\";\nimport GridProperty from \"../common/GridProperty\";\nimport { handleApiError, doFetch } from \"../common/Tools\";\n\nclass Books extends Component {\n  constructor() {\n    super();\n    this.state = {\n      data: null,\n      selected: null,\n      showEdit: false,\n      showDelete: false,\n    };\n  }\n\n  model = Books.getModel(\"Book\", [\"id\", \"title\", \"author\", \"genres\"]);\n\n  componentDidMount() {\n    this.loadData();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.state.refreshList) {\n      this.loadData();\n    }\n  }\n\n  loadData = () => {\n    doFetch(\"/api/books\", \"GET\")\n      .then(handleApiError)\n      .then((response) => response.json())\n      .then((json) => this.setState({ data: json, refreshList: false }))\n      .catch((error) => console.error(error));\n  };\n\n  static getModel = (msgPrefix, idList) => {\n    return idList.map((id) => new GridProperty(id, id));\n  };\n\n  render() {\n    if (!this.state.data) {\n        return \"\";\n    }\n\n    const { data } = this.state;\n    \n    const rows = data.map((book) => {\n      const rowBook = Object.assign({}, book);\n\n      rowBook[\"actions\"] = <span>actions</span>;\n\n      return rowBook;\n    });\n\n    return (\n      <div>\n        <h1>Book: My React App!</h1>\n        <Grid model={this.model} data={rows} />\n      </div>\n    );\n  }\n}\n\nexport default Books;\n"],"sourceRoot":""}